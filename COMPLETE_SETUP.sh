#!/bin/bash

echo "ðŸš— Complete Parking System Setup"
echo "=================================="
echo ""
echo "This will:"
echo "1. Add more test data (including expired RFIDs)"
echo "2. Update payment calculation (ceiling/round up logic)"
echo ""
echo "Please enter your MySQL root password when prompted"
echo ""

# Add more test data
echo "ðŸ“Š Adding test data..."
mysql -u root -p dbmsproject < add_more_test_data.sql

echo ""
echo "ðŸ’° Updating payment calculation..."
mysql -u root -p dbmsproject < update_payment_calculation.sql

echo ""
echo "âœ… Setup Complete!"
echo ""
echo "=== TEST RFID UIDs ==="
echo ""
echo "âœ… VALID RFIDs (will work):"
echo "  - RFID001 â†’ KA01AB1234 (John Doe - Car)"
echo "  - RFID002 â†’ KA02CD5678 (Jane Smith - SUV)"
echo "  - RFID003 â†’ MH01EF9012 (Bob Wilson - Sedan)"
echo "  - RFID006 â†’ TN05RS3333 (David Lee - Car)"
echo "  - RFID007 â†’ MH06TU4444 (Emma Wilson - Sedan)"
echo ""
echo "âŒ EXPIRED RFIDs (will be rejected by trigger):"
echo "  - RFID004 â†’ KA03XY1111 (Alice - Motorcycle) [Expired 6 months ago]"
echo "  - RFID005 â†’ DL04PQ2222 (Charlie - SUV) [Expired yesterday]"
echo ""
echo "=== PAYMENT CALCULATION ==="
echo ""
echo "New Rule: Always charge for FULL hours (ceiling/round up)"
echo ""
echo "Examples with Regular slot (â‚¹50/hour):"
echo "  - Park for 10 minutes  â†’ Charge 1 hour  = â‚¹50"
echo "  - Park for 30 minutes  â†’ Charge 1 hour  = â‚¹50"
echo "  - Park for 60 minutes  â†’ Charge 1 hour  = â‚¹50"
echo "  - Park for 61 minutes  â†’ Charge 2 hours = â‚¹100"
echo "  - Park for 90 minutes  â†’ Charge 2 hours = â‚¹100"
echo "  - Park for 121 minutes â†’ Charge 3 hours = â‚¹150"
echo ""
echo "Examples with Premium slot (â‚¹75/hour):"
echo "  - Park for 30 minutes  â†’ Charge 1 hour  = â‚¹75"
echo "  - Park for 61 minutes  â†’ Charge 2 hours = â‚¹150"
echo ""
echo "Examples with Motorcycle slot (â‚¹30/hour):"
echo "  - Park for 30 minutes  â†’ Charge 1 hour  = â‚¹30"
echo "  - Park for 61 minutes  â†’ Charge 2 hours = â‚¹60"
echo ""
echo "=== NEXT STEPS ==="
echo ""
echo "1. Make sure .env has your MySQL password:"
echo "   DB_PASSWORD=your_password"
echo "   PORT=5001"
echo ""
echo "2. Start backend:"
echo "   PORT=5001 node server/index.js &"
echo ""
echo "3. Go to: http://localhost:3000/scanner"
echo ""
echo "4. Test scenarios:"
echo "   a) Enter RFID001 â†’ Should work (valid)"
echo "   b) Enter RFID004 â†’ Should fail (expired RFID)"
echo "   c) Park and exit quickly â†’ Should charge 1 hour minimum"
echo ""
